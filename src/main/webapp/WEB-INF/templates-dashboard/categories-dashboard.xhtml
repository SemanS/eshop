<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"

      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
<!--xmlns:h="http://java.sun.com/jsf/html"-->
<pre></pre>


<h:form id="treeForm" styleClass="ui stackable grid">
    <div class="one wide column"></div>

    <div class="four wide column">
        <p:tree id="tree2" value="#{categoryTreeTableBean.rootCategories}" var="node" selectionMode="single"
                selection="#{categoryTreeTableBean.selectedNode}"
                draggable="true" droppable="true" dragdropScope="demo">
            <p:ajax event="dragdrop" listener="#{categoryTreeTableBean.onDragDrop}"
                    update=":treeForm:tabView"/>
            <p:ajax event="select" update=":treeForm:tabView" listener="#{categoryTreeTableBean.TreeNodeToCategory}"/>
            <p:treeNode>
                <h:outputText value="#{node.name}"/>
            </p:treeNode>
            <p:treeNode>
                <img class="ui image small"
                     src="data:image/png;base64,#{categoryDashboardBean.getBaseImage(node)}"/>
            </p:treeNode>
        </p:tree>
    </div>

    <!--<h:form id="itemsFormId" styleClass="six wide column">
        <p:treeTable value="#{categoryTreeTableBean.rootCategories}" var="category"
                     style="font-size: 100% !important;" draggableRows="true">
            <f:facet name="header">
                Zoznam kategórií
            </f:facet>
            &lt;!&ndash; <p:ajax event="expand" listener="#{categoryDashboardBean.onNodeExpandIncome(category)}"/>
             <p:ajax event="collapse" listener="#{categoryDashboardBean.onNodeCollapseIncome(category)}"/>&ndash;&gt;
            <p:column headerText="Obr." style="text-align: center; width:20%">
                <img class="ui image tiny"
                     src="data:image/png;base64,#{categoryDashboardBean.getBaseImage(category)}"/>
            </p:column>
            <p:column headerText="Názov" style="width:40%">
                <h:outputText value="#{category.name}"/>
            </p:column>
            <p:column headerText="Url" style="width:40%">
                <h:outputText value="#{category.url}"/>
            </p:column>
        </p:treeTable>
    </h:form>-->

    <!--<h:form id="categoryDetailId" styleClass="ui form" enctype="multipart/form-data">-->
    <div class="ui form eight wide column">
        <p:tabView id="tabView">
            <div class="five wide column">
                <p:tab title="Zmeniť kategóriu">
                    <h4 class="ui horizontal divider header" style="margin-top: 20px">
                        Hlavné kategórie
                    </h4>
                    <!--<div class="field">
                        <h:outputText
                                value="#{categoryTreeTableBean.selectedCategory.name}"/>
                        <h:selectOneMenu value="#{categoryDashboardBean.selectedRootCategory}">
                            <f:selectItems value="#{categoryDashboardBean.rootCategories}" var="c"
                                           itemValue="#{c.name}" itemLabel="#{c.name}"/>
                            <f:ajax event="change" render=":categoryDetailId"
                                    listener="#{categoryDashboardBean.onChangeSelectedRootCategory(categoryDashboardBean.selectedRootCategory)}"/>
                        </h:selectOneMenu>
                    </div>-->

                    <div class="two fields">
                        <div class="field">
                            <p:inputText styleClass="nonBorder"
                                         value="#{categoryDashboardBean.inputSelectedRootCategory.name}"
                                         placeholder="Zadajte názov hlavnej kategórie"
                                         type="text"/>
                        </div>
                        <div class="field">
                            <p:inputText styleClass="nonBorder"
                                         value="#{categoryDashboardBean.inputSelectedRootCategory.url}"
                                         placeholder="Zadajte url hlavnej kategórie"
                                         type="text"/>
                        </div>
                    </div>
                    <div class="two fields">
                        <div class="field">
                            <label>Vložiť obrázok kategórie</label>
                            <h:inputFile id="upload"
                                         value="#{categoryDashboardBean.file}"
                                         label="Insert image"
                                         update="categoryDetailId">
                                <!--<f:ajax listener="#{categoryDashboardBean.handleFileUpload}" render=":categoryDetailId"/>-->
                            </h:inputFile>
                        </div>
                        <div class="field">
                            <label>Obrázok kategórie</label>
                            <img class="ui image"
                                 src="data:image/png;base64,#{categoryDashboardBean.getBaseImage(categoryDashboardBean.inputSelectedRootCategory)}"/>
                        </div>
                    </div>

                    <h:commandLink class="medium ui button" icon="ui-icon-star"
                                   style="border-radius: 0px !important; color: blue"
                                   action="#{categoryDashboardBean.onChangeRootCategory()}"
                                   value="Zmeniť hlavnú kategóriu">
                    </h:commandLink>
                    <!--
                                        <pre></pre>
                                        <h4 class="ui horizontal divider header" style="margin-top: 40px">
                                            Vedľajšie kategórie
                                        </h4>

                                        <div class="field">
                                            <h:selectOneMenu value="#{categoryDashboardBean.selectedSubCategory}">
                                                &lt;!&ndash;<f:selectItem itemLabel="#{itemDashboardBean.selectedItem.category.name}"/>&ndash;&gt;
                                                <f:selectItems value="#{categoryDashboardBean.categories}" var="c"
                                                               itemValue="#{c.name}" itemLabel="#{c.name}"/>
                                                <f:ajax event="change" render=":categoryDetailId"
                                                        listener="#{categoryDashboardBean.onChangeSelectedSubCategory(categoryDashboardBean.selectedSubCategory)}"/>

                                                <f:ajax event="change" render=":categoryDetailId"
                                                        listener="#{categoryDashboardBean.onChangeAssignedCategory(categoryDashboardBean.selectedSubCategory)}"/>
                                            </h:selectOneMenu>
                                        </div>

                                        <div class="two fields">
                                            <div class="field">
                                                <p:inputText styleClass="nonBorder"
                                                             value="#{categoryDashboardBean.inputSelectedSubCategory.name}"
                                                             placeholder="Zadajte názov vedľajšej kategórie"
                                                             type="text"/>
                                            </div>
                                            <div class="field">
                                                <p:inputText styleClass="nonBorder"
                                                             value="#{categoryDashboardBean.inputSelectedSubCategory.url}"
                                                             placeholder="Zadajte url vedľajšej kategórie"
                                                             type="text"/>
                                            </div>
                                        </div>
                                        <div class="two fields">
                                            <div class="field">
                                                <label>Vložiť obrázok kategórie</label>
                                                <h:inputFile id="asds"
                                                             value="#{categoryDashboardBean.fileChangeSub}"
                                                             label="Insert image"
                                                             update="editor forma">
                                                </h:inputFile>
                                            </div>
                                            <div class="field">
                                                <label>Obrázok kategórie</label>
                                                <img class="ui image"
                                                     src="data:image/png;base64,#{categoryDashboardBean.getBaseImage(categoryDashboardBean.inputSelectedSubCategory)}"/>
                                            </div>
                                        </div>

                                        <h:commandLink class="medium ui button" icon="ui-icon-star"
                                                       style="border-radius: 0px !important; color: blue"
                                                       action="#{categoryDashboardBean.onChangeSubCategory()}"
                                                       value="Zmeniť vedľajšiu kategóriu">
                                        </h:commandLink>
                                        <pre></pre>
                                        <label>Priradiť vedľajšiu kategóriu ku hlavnej kategórii:</label>
                                        <div class="two fields">
                                            <div class="field">
                                                <h:selectOneMenu id="selectedRootCategoryAssignId"
                                                                 value="#{categoryDashboardBean.selectedRootCategoryAssign}">
                                                    <f:selectItems value="#{categoryDashboardBean.rootCategories}" var="c"
                                                                   itemValue="#{c.name}" itemLabel="#{c.name}"/>
                                                </h:selectOneMenu>
                                            </div>
                                            <div class="field">
                                                <h:commandLink class="medium ui button right floated" icon="ui-icon-star"
                                                               style="border-radius: 0px !important; color: blue"
                                                               action="#{categoryDashboardBean.onSubCategoryAssign()}"
                                                               value="Priradiť ku hlavnej kategórii">
                                                </h:commandLink>
                                            </div>
                                        </div>-->
                </p:tab>
            </div>
            <div class="five wide column">
                <p:tab title="Pridať kategóriu">
                    <h4 class="ui horizontal divider header" style="margin-top: 20px">
                        <!--<i class="tag icon"></i>-->
                        Hlavné kategórie
                    </h4>
                    <div class="two fields">
                        <div class="field">
                            <p:inputText styleClass="nonBorder"
                                         value="#{categoryDashboardBean.inputRootCategory.name}"
                                         placeholder="Zadajte názov hlavnej kategórie"
                                         type="text"/>
                        </div>
                        <div class="field">
                            <p:inputText styleClass="nonBorder"
                                         value="#{categoryDashboardBean.inputRootCategory.url}"
                                         placeholder="Zadajte url hlavnej kategórie"
                                         type="text"/>
                        </div>
                    </div>
                    <div class="two fields">
                        <div class="field">
                            <label>Vložiť obrázok kategórie</label>
                            <h:inputFile id="dw"
                                         value="#{categoryDashboardBean.fileNew}"
                                         label="Insert image"
                                         update="categoryDetailId">
                                <!--<f:ajax listener="#{categoryDashboardBean.handleFileUpload}" render=":categoryDetailId"/>-->
                            </h:inputFile>
                        </div>
                        <div class="field">
                            <label>Obrázok kategórie</label>
                            <img class="ui image"
                                 src="data:image/png;base64,#{categoryDashboardBean.getBaseImage(categoryDashboardBean.inputSelectedRootCategory)}"/>
                        </div>
                    </div>
                    <h:commandLink class="medium ui button" icon="ui-icon-star"
                                   style="border-radius: 0px !important; color: blue"
                                   action="#{categoryDashboardBean.onSaveRootCategory()}"
                                   value="Pridať hlavnú kategóriu">
                    </h:commandLink>

                    <pre></pre>
                    <h4 class="ui horizontal divider header" style="margin-top: 40px">
                        <!--<i class="tag icon"></i>-->
                        Vedľajšie kategórie
                    </h4>

                    <div class="two fields">
                        <div class="field">
                            <p:inputText styleClass="nonBorder"
                                         value="#{categoryDashboardBean.inputSubCategory.name}"
                                         placeholder="Zadajte názov vedľajšej kategórie"
                                         type="text"/>
                        </div>
                        <div class="field">
                            <p:inputText styleClass="nonBorder"
                                         value="#{categoryDashboardBean.inputSubCategory.url}"
                                         placeholder="Zadajte url vedľajšej kategórie"
                                         type="text"/>
                        </div>
                    </div>

                    <div class="two fields">
                        <div class="field">
                            <label>Vložiť obrázok kategórie</label>
                            <h:inputFile id="dw2"
                                         value="#{categoryDashboardBean.fileNewSide}"
                                         label="Insert image"
                                         update="categoryDetailId">
                                <!--<f:ajax listener="#{categoryDashboardBean.handleFileUpload}" render=":categoryDetailId"/>-->
                            </h:inputFile>
                        </div>
                        <div class="field">
                            <label>Obrázok kategórie</label>
                            <img class="ui image"
                                 src="data:image/png;base64,#{categoryDashboardBean.getBaseImage(categoryDashboardBean.inputSelectedRootCategory)}"/>
                        </div>
                    </div>

                    <pre></pre>
                    <label>Priradiť vedľajšiu kategóriu ku hlavnej kategórii:</label>

                    <div class="field">
                        <h:selectOneMenu value="#{categoryDashboardBean.selectedRootCategoryAdd}">
                            <f:selectItems value="#{categoryDashboardBean.rootCategories}" var="c"
                                           itemValue="#{c.name}" itemLabel="#{c.name}"/>
                        </h:selectOneMenu>
                    </div>

                    <h:commandLink class="medium ui button left floated" icon="ui-icon-star"
                                   style="border-radius: 0px !important; color: blue"
                                   action="#{categoryDashboardBean.onSubCategoryAdd()}"
                                   value="Priradiť ku hlavnej kategórii">
                    </h:commandLink>

                </p:tab>
            </div>
        </p:tabView>
    </div>

    <div class="one wide column"></div>
</h:form>


</html>